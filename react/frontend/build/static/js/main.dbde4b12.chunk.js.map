{"version":3,"sources":["Header.js","context/playContext.js","Player.js","views/about.js","Collapsible.js","images/nr_1.png","images/nr_2.png","images/nr_3.png","images/nr_4.png","images/nr_5.png","views/upload.js","App.js","index.js"],"names":["HeaderLink","page","title","charAt","toUpperCase","slice","to","className","Header","PlayContext","createContext","PlayProvider","children","useState","isPlaying","setIsPlaying","radio","setAudioRef","value","getIsPlaying","useEffect","src","load","play","pause","Provider","usePlayContext","useContext","Player","textPlaying","style","color","alignItems","display","height","paddingRight","fontSize","weight","icon","PauseIcon","PlayIcon","onClick","ref","c","About","target","href","Collapsible","props","state","open","togglePanel","bind","e","this","setState","React","Component","Upload","file","setFile","success","setSuccess","push","useToast","disabled","setDisabled","formData","FormData","append","axios","post","then","response","data","description","status","isMobile","catch","align","id","event","currentTarget","checked","flex","paddingLeft","htmlFor","type","onChange","fileToUpload","files","accept","image1","alt","srcset","image2","image3","image4","image5","App","path","component","exact","ReactDOM","render","StrictMode","theme","studioTheme","scheme","document","getElementById"],"mappings":"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","file":"static/js/main.dbde4b12.chunk.js","sourcesContent":["import \"./Header.css\";\n\nimport { Link } from \"react-router-dom\";\n\nconst HeaderLink = ({ page }) => {\n  const title = page.charAt(0).toUpperCase() + page.slice(1);\n  return (\n    <Link to={`/${page}`} className=\"headerlink-title\">\n      {title}\n    </Link>\n  );\n};\n\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <div className=\"nav-container\">\n        <HeaderLink page=\"om\"></HeaderLink>\n        {/*<HeaderLink page=\"uppladdning\"></HeaderLink>*/}\n        <HeaderLink page=\"uppladdning\"></HeaderLink>\n        {/*<HeaderLink page=\"kontakt\"></HeaderLink>*/}\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import {\n  createContext,\n  useContext,\n  useEffect,\n  useRef,\n  useMemo,\n  useState,\n} from \"react\";\n\nconst PlayContext = createContext(false);\n\nexport function PlayProvider({ children }) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [radio, setAudioRef] = useState(null);\n  //const radio = useMemo(() => new Audio(), []);\n\n  const value = {\n    setIsPlaying: setIsPlaying,\n    getIsPlaying: isPlaying,\n    setAudioRef: setAudioRef,\n  };\n\n  useEffect(() => {\n    if (radio !== null) {\n      if (isPlaying) {\n        radio.src = \"https://stream.radiodiabetes.eu/\";\n        radio.load();\n        radio.play(); // TODO sätta volym till 1 istället? eller synca på annat\n        // sätt...\n      } else {\n        radio.pause(); // TODO sätta volym till 0 istället? eller synca på annat\n        // sätt...\n      }\n    }\n  }, [isPlaying, radio]);\n\n  return <PlayContext.Provider value={value}>{children} </PlayContext.Provider>;\n}\n\nexport const usePlayContext = () => useContext(PlayContext);\n","import React from \"react\";\nimport \"./Player.css\";\nimport { Button, Card, Inline, Text } from \"@sanity/ui\";\nimport { PauseIcon, PlayIcon } from \"@sanity/icons\";\nimport { usePlayContext } from \"./context\";\n\nexport function Player() {\n  const { getIsPlaying, setIsPlaying, setAudioRef } = usePlayContext();\n\n  const textPlaying = !getIsPlaying ? \"lyssna till\" : \"pausa\";\n\n  return (\n    <div className=\"playbar\">\n      {/*<Inline space={2}>*/}\n      {/*<Card padding={2} tone=\"critical\" style={style} />*/}\n      <Text\n        style={{\n          color: \"lightgrey\",\n          alignItems: \"center\",\n          display: \"flex\",\n          height: \"100%\",\n          paddingRight: \"10px\",\n          fontSize: \"80%\",\n        }}\n        weight=\"semibold\"\n      >\n        Klicka här för att {textPlaying} radion:\n      </Text>\n      {/*</Inline>*/}\n\n      <Button\n        icon={getIsPlaying ? PauseIcon : PlayIcon}\n        onClick={() => setIsPlaying(!getIsPlaying)}\n      />\n      <audio ref={(c) => setAudioRef(c)}></audio>\n    </div>\n  );\n}\n","import \"./about.css\";\nimport React from \"react\";\n\nexport function About() {\n  return (\n    <div className=\"infotext\">\n      <p>\n        Hej, och välkommen till <em>Radio Diabetes</em>!\n      </p>\n      <p>\n        <em>Radio Diabetes</em> är mitt examensprojekt inom kandidatutbildningen{\" \"}\n        <em>Elektroakustisk komposition</em> på <em>Kungliga Musikhögskolan</em>\n        .\n      </p>\n      <p>\n        <em>Radio Diabetes</em> är Karl Johannes Jondells examensprojekt i\n        kandidatutbildningen elektroakustisk komposition på Kungliga\n        Musikhögskolan. Vill du läsa den examenstext tillhörande projektet finns\n        den att ladda ned här. All kod för projektet finns tillgänglig\n        <a target=\"_blank\" href=\"http://repo.radiodiabetes.eu\">\n          här\n        </a>\n        !\n      </p>\n    </div>\n  );\n}\n","import \"./Collapsible.css\";\nimport React from \"react\";\n\nclass Collapsible extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n    this.togglePanel = this.togglePanel.bind(this);\n  }\n  togglePanel(e) {\n    this.setState({ open: !this.state.open });\n  }\n  render() {\n    return (\n      <div className=\"instruktioner\">\n        <div onClick={(e) => this.togglePanel(e)} className=\"collapsible\">\n          {this.props.title}\n        </div>\n        {this.state.open ? (\n          <div className=\"content\">{this.props.children}</div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default Collapsible;\n","export default __webpack_public_path__ + \"static/media/nr_1.cc494ec8.png\";","export default __webpack_public_path__ + \"static/media/nr_2.96970491.png\";","export default __webpack_public_path__ + \"static/media/nr_3.9ff247e8.png\";","export default __webpack_public_path__ + \"static/media/nr_4.2781d3c5.png\";","export default __webpack_public_path__ + \"static/media/nr_5.88839ca0.png\";","import { isMobile } from \"react-device-detect\";\nimport { Button, Box, Checkbox, Flex, Text, useToast } from \"@sanity/ui\";\nimport \"./upload.css\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { usePlayContext } from \"../context\";\nimport Collapsible from \"../Collapsible\";\n\nimport image1 from \"../images/nr_1.png\";\nimport image2 from \"../images/nr_2.png\";\nimport image3 from \"../images/nr_3.png\";\nimport image4 from \"../images/nr_4.png\";\nimport image5 from \"../images/nr_5.png\";\n\nexport function Upload() {\n  const [file, setFile] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const { setIsPlaying, getIsPlaying, setAudioRef } = usePlayContext();\n  const { push } = useToast();\n  const [disabled, setDisabled] = useState(true);\n\n  const handleDisabled = (event) => {\n    setDisabled(!event.currentTarget.checked);\n  };\n\n  const onFileChange = (event) => {\n    const fileToUpload = event.target.files[0];\n    setFile(fileToUpload);\n  };\n\n  useEffect(() => {\n    if (!file) return;\n    const formData = new FormData();\n\n    formData.append(\"file\", file);\n    axios\n      .post(\"/api/uppladdning\", formData)\n      .then((response) => {\n        if (response.data[\"uploadSuccess\"]) {\n          setSuccess(true);\n          push({\n            title: \"Tack!\",\n            description: \"Ditt bidrag har mottagits!\",\n            status: \"success\",\n          });\n\n          if (!isMobile) {\n            if (!getIsPlaying) {\n              setIsPlaying(true);\n            }\n          }\n        }\n      })\n      .catch(() => {\n        push({\n          title: \"Hoppsan!\",\n          description: \"Något har blivit fel. Vänligen försök igen!\",\n          status: \"error\",\n        });\n      });\n    return false;\n  }, [file, getIsPlaying, push, setIsPlaying, setAudioRef]);\n\n  if (success && !isMobile) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <div>\n      {/*getIsPlaying ? \"Is playing\" : \"Not playing\"*/}\n      {/*<Button text=\"Play\" onClick={() => setIsPlaying(!getIsPlaying)} />*/}\n      <div className=\"form\">\n        {/*        <div>\n          <input\n            type=\"checkbox\"\n            name=\"toc\"\n            id=\"toc\"\n            style={{ marginRight: \"0.5em\", marginLeft: \"1em\" }}\n            onClick={handleDisabled}\n          />\n          <label style={{ textAlign: \"center\" }}>\n            Genom att klicka i denna knapp godkänner jag användandet av den\n            uppladdade datan i detta projekt.{\" \"}\n          </label>\n        </div>*/}\n        <Flex align=\"center\">\n          <Checkbox\n            id=\"checkbox\"\n            onClick={handleDisabled}\n            style={{ display: \"block\" }}\n          />\n          <Box flex={1} paddingLeft={3}>\n            <Text>\n              <label htmlFor=\"checkbox\">\n                Genom att klicka i denna knapp godkänner jag användandet av den\n                uppladdade datan i detta projekt.\n              </label>\n            </Text>\n          </Box>\n        </Flex>\n        <input\n          type=\"file\"\n          onChange={onFileChange}\n          /*onClick={() => }*/\n          accept=\".xls, .xlsx, .csv\"\n          id=\"upload\"\n          disabled={disabled}\n        />\n      </div>\n      <Collapsible title=\"Instruktioner (klicka här!)\">\n        <div>\n          {\" \"}\n          <p>\n            Följ instruktionerna nedan för att delta i radioströmmen.\n            <br />\n            <div style={{ fontSize: \"80%\" }}>\n              Notera att det endast går att ladda upp värden via en dator i\n              nuläget.\n            </div>\n          </p>\n          <p>\n            1. Surfa in på{\" \"}\n            <a href=\"https://diasend.com/\">https://diasend.com/</a> och logga\n            in:\n            <img src={image1} alt=\"\" srcset=\"\" />\n          </p>\n          <p>\n            2. Klicka på fältet <em>\"Dela data\"</em>:\n            <img src={image2} alt=\"\" srcset=\"\" />\n          </p>\n          <p>\n            3. Klicka sedan på \"<em>Exportera data</em>\":\n            <img src={image3} alt=\"\" srcset=\"\" />\n          </p>\n          <p>\n            4. Skriv in koden i fältet \"Ange koden nedan\", och klicka sedan på\n            \"Exportera till Excel\":\n            <img src={image4} alt=\"\" srcset=\"\" />\n          </p>\n          <p>\n            5. Till sist laddar du upp \".xls\" filen genom att först klicka i\n            rutan där du godkänner att filen används, och sedan klicka på\n            knappen \"<em>Välj fil</em>\":\n            <img src={image5} alt=\"\" srcset=\"\" />\n          </p>\n        </div>\n      </Collapsible>\n      {/*      <Collapsible trigger=\"Instruktioner\">\n        <p>\n          Här står det lite instruktioner\n        </p>\n      </Collapsible>*/}\n    </div>\n  );\n}\n","// import axios from \"axios\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport Header from \"./Header\";\nimport { Player } from \"./Player\";\nimport { About, Contact, Home, Success, Upload } from \"./views\";\n\n// let radio = new Audio(\"https://stream.radiodiabetes.eu/\");\n\n// function Hem(props) { return (<div><h2>Hem</h2>\n//    </div>); }\n\n/*\n * Gör om till en egen klass...\n */\n// class Uppladdning extends React.Component {\n//   onFileChange = (event) => {\n//     this.file = event.target.files[0];\n//     this.onUserSubmit(); // TODO ta bort ??? auto-submit...\n\n//     console.log(event.target.files[0]);\n//   };\n\n//   onUserSubmit = (event) => {\n//     if (event != null) event.preventDefault();\n//     // TODO lägg till begränsa storlek på fil! eller backend?\n//     const formData = new FormData();\n//     formData.append(\"file\", this.file);\n//     axios.post(\"/api/uppladdning\", formData).then((respons) => {\n//       if (respons.data[\"uploadSuccess\"]) {\n//         this.props.history.push(\"/success\");\n//         if (radio.paused) radio.play();\n//       }\n//     });\n//     return false;\n//   };\n\n//   constructor(props) {\n//     super(props);\n//   }\n\n//   render() {\n//     return (\n//       <div>\n//         <form onSubmit={this.onUserSubmit}>\n//           <input\n//             type=\"file\"\n//             onChange={this.onFileChange}\n//             accept=\".xls, .xlsx, .csv\"\n//           />\n//         </form>\n//       </div>\n//     );\n//   }\n// }\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Header />\n        <Route path=\"/:page\" component={Player}></Route>\n        <Route exact path=\"/\" component={Player}></Route>\n        <Route exact path=\"/\" component={About}></Route>\n        <Route exact path=\"/om\" component={About}></Route>\n        {/* <Route exact path=\"/uppladdning\" component={Uppladdning}></Route> */}\n        <Route exact path=\"/uppladdning\" component={Upload}></Route>\n        {/*<Route exact path=\"/kontakt\" component={Contact}></Route>*/}\n        {/*<Route exact path=\"/success\" component={Success}></Route>*/}\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport { ThemeProvider, studioTheme, ToastProvider } from \"@sanity/ui\";\n\nimport { PlayProvider } from \"./context\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={studioTheme} scheme=\"light\">\n      <ToastProvider>\n        <PlayProvider>\n          <App />\n        </PlayProvider>\n      </ToastProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}