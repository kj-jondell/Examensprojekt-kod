{"version":3,"sources":["Header.js","context/playContext.js","Player.js","views/about.js","views/contact.js","views/home.js","views/upload.js","views/success.js","App.js","index.js"],"names":["HeaderLink","page","title","toUpperCase","to","className","Header","PlayContext","createContext","PlayProvider","children","useState","isPlaying","setIsPlaying","radio","useMemo","Audio","value","getIsPlaying","useEffect","src","play","pause","Provider","usePlayContext","useContext","Player","color","style","backgroundColor","borderRadius","width","height","space","padding","tone","weight","icon","PauseIcon","PlayIcon","onClick","About","Contact","Home","Upload","file","setFile","success","setSuccess","push","useToast","formData","FormData","append","axios","post","then","response","data","console","log","description","status","catch","type","onChange","event","fileToUpload","target","files","accept","id","Success","App","path","component","exact","ReactDOM","render","StrictMode","theme","studioTheme","scheme","document","getElementById"],"mappings":"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","file":"static/js/main.3ae09f79.chunk.js","sourcesContent":["import \"./Header.css\";\n\nimport {Link} from \"react-router-dom\";\n\nconst HeaderLink = ({page}) => {\n  const title = page.toUpperCase(); //page.charAt(0).toUpperCase() + page.slice(1);\n  return (\n    <Link to={`/${page}`} className=\"headerlink-title\">\n      {title}\n    </Link>\n  );\n};\n\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <HeaderLink page=\"om\"></HeaderLink>\n      {/*<HeaderLink page=\"uppladdning\"></HeaderLink>*/}\n      <HeaderLink page=\"uppladdning\"></HeaderLink>\n      <HeaderLink page=\"kontakt\"></HeaderLink>\n    </div>\n  );\n};\n\nexport default Header;\n","import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\n\nconst PlayContext = createContext(false);\n\nexport function PlayProvider({ children }) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const radio = useMemo(() => new Audio(), []);\n\n  const value = {\n    setIsPlaying: setIsPlaying,\n    getIsPlaying: isPlaying,\n  };\n\n  useEffect(() => {\n    if (isPlaying) {\n      radio.src = \"https://stream.radiodiabetes.eu/\";\n      radio.play(); // TODO sätta volym till 1 istället? eller synca på annat\n      // sätt...\n    } else {\n      radio.pause(); // TODO sätta volym till 0 istället? eller synca på annat\n      // sätt...\n    }\n  }, [isPlaying, radio]);\n\n  return <PlayContext.Provider value={value}>{children} </PlayContext.Provider>;\n}\n\nexport const usePlayContext = () => useContext(PlayContext);\n","import React from \"react\";\nimport \"./Player.css\";\nimport { Button, Card, Inline, Text } from \"@sanity/ui\";\nimport { PauseIcon, PlayIcon } from \"@sanity/icons\";\nimport { usePlayContext } from \"./context\";\n\nexport function Player() {\n  const { getIsPlaying, setIsPlaying } = usePlayContext();\n\n  const color = getIsPlaying ? \"green\" : \"red\";\n\n  const style = {\n    backgroundColor: color,\n    borderRadius: \"50%\",\n    width: 10,\n    height: 10,\n  };\n\n  return (\n    <div className=\"playbar\">\n      <Inline space={2}>\n        <Card padding={2} tone=\"critical\" style={style} />\n        <Text style={{ color: color }} weight=\"semibold\">\n          Live\n        </Text>\n      </Inline>\n\n      <Button\n        icon={getIsPlaying ? PauseIcon : PlayIcon}\n        onClick={() => setIsPlaying(!getIsPlaying)}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport function About() {\n  return <p>About</p>;\n}\n","import React from \"react\";\n\nexport function Contact() {\n  return <p>Contact</p>;\n}\n","import React from \"react\";\n\nexport function Home() {\n  return <p>Home</p>;\n}\n","import { Button, useToast } from \"@sanity/ui\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { usePlayContext } from \"../context\";\n\nexport function Upload() {\n  const [file, setFile] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const { setIsPlaying, getIsPlaying } = usePlayContext();\n  const { push } = useToast();\n\n  const onFileChange = (event) => {\n    const fileToUpload = event.target.files[0];\n    setFile(fileToUpload);\n  };\n\n  useEffect(() => {\n    if (!file) return;\n    const formData = new FormData();\n\n    formData.append(\"file\", file);\n    axios\n      .post(\"/api/uppladdning\", formData)\n      .then((response) => {\n        if (response.data[\"uploadSuccess\"]) {\n          console.log(\"HEY\");\n          setSuccess(true);\n          push({\n            title: \"Tack!\",\n            description: \"Ditt bidrag har mottagits!\",\n            status: \"success\",\n          });\n          if (!getIsPlaying) {\n            setIsPlaying(true);\n          }\n        }\n      })\n      .catch(() => {\n        push({\n          title: \"Error\",\n          description: \"Något har blivit fel. Vänligen försök igen!\",\n          status: \"error\",\n        });\n      });\n    return false;\n  }, [file, getIsPlaying, push, setIsPlaying]);\n\n  if (success) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <div>\n      {/*getIsPlaying ? \"Is playing\" : \"Not playing\"*/}\n      {/*<Button text=\"Play\" onClick={() => setIsPlaying(!getIsPlaying)} />*/}\n      <input\n        type=\"file\"\n        onChange={onFileChange}\n        accept=\".xls, .xlsx, .csv\"\n        id=\"upload\"\n      />{\" \"}\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport function Success() {\n  return <p>Ditt bidrag är mottaget! Tack så mycket!</p>;\n}\n","// import axios from \"axios\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport Header from \"./Header\";\nimport { Player } from \"./Player\";\nimport { About, Contact, Home, Success, Upload } from \"./views\";\n\n// let radio = new Audio(\"https://stream.radiodiabetes.eu/\");\n\n// function Hem(props) { return (<div><h2>Hem</h2>\n//    </div>); }\n\n/*\n * Gör om till en egen klass...\n */\n// class Uppladdning extends React.Component {\n//   onFileChange = (event) => {\n//     this.file = event.target.files[0];\n//     this.onUserSubmit(); // TODO ta bort ??? auto-submit...\n\n//     console.log(event.target.files[0]);\n//   };\n\n//   onUserSubmit = (event) => {\n//     if (event != null) event.preventDefault();\n//     // TODO lägg till begränsa storlek på fil! eller backend?\n//     const formData = new FormData();\n//     formData.append(\"file\", this.file);\n//     axios.post(\"/api/uppladdning\", formData).then((respons) => {\n//       if (respons.data[\"uploadSuccess\"]) {\n//         this.props.history.push(\"/success\");\n//         if (radio.paused) radio.play();\n//       }\n//     });\n//     return false;\n//   };\n\n//   constructor(props) {\n//     super(props);\n//   }\n\n//   render() {\n//     return (\n//       <div>\n//         <form onSubmit={this.onUserSubmit}>\n//           <input\n//             type=\"file\"\n//             onChange={this.onFileChange}\n//             accept=\".xls, .xlsx, .csv\"\n//           />\n//         </form>\n//       </div>\n//     );\n//   }\n// }\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Header />\n        <Route path=\"/:page\" component={Player}></Route>\n        <Route exact path=\"/\" component={Player}></Route>\n        <Route exact path=\"/\" component={Home}></Route>\n        <Route exact path=\"/om\" component={About}></Route>\n        {/* <Route exact path=\"/uppladdning\" component={Uppladdning}></Route> */}\n        <Route exact path=\"/uppladdning\" component={Upload}></Route>\n        <Route exact path=\"/kontakt\" component={Contact}></Route>\n        <Route exact path=\"/success\" component={Success}></Route>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport { ThemeProvider, studioTheme, ToastProvider } from \"@sanity/ui\";\n\nimport { PlayProvider } from \"./context\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={studioTheme} scheme=\"light\">\n      <ToastProvider>\n        <PlayProvider>\n          <App />\n        </PlayProvider>\n      </ToastProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}